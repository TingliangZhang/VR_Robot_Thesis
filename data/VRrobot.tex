\chapter{项目背景}

如今，工业机器人很大程度上实现了自动化，但是同时也有一些情况下需要手动操控机器人，如抢险救灾、需要随机应变的工作等。对于这些需要人工远程操控的机器人，其操作方式基本都是向计算机输入指令而实现。工作人员需要熟悉各种操作平台，并需要长时间紧盯电脑屏幕进行操作，其交互体验不是很理想。

因此，我们希望能够开发一套便捷、高效、交互体验良好的机器人控制系统，让操作者能够准确地把握机器人所处的环境，并获得理想的操作体验。基于这种想法，我们开发了一套基于VR设备的远程控制系统，用双目摄像头将画面投射到VR头盔中，使操作者能够实时观测到机器人所处的三维空间信息；并用多个Vive追踪器将操作者的肢体动作传递给机器人，使其能够按照操作者的动作而行动，以使操作者获得良好操作体验的同时能够对机器人进行实时、精准的控制。

此外，此系统可以很方便地移植到各种形态的机器人上，因此应用范围较为广泛，具有较高的实用价值。

目前国外已经有一些将VR技术融合到工业机器人系统的想法，但大多聚焦于三维场景重构方面。文献[1]介绍了基于VR的煤矿救援机器人，其中三维场景建模需要花费大量精力，而机器人的操作依然是基于指令控制，因此该系统较为复杂，效率较低；文献[2]则将VR技术融入到ROS机器人操作系统中进行远程控制，其核心思想依然是3D场景建模。相比之下，本项目所使用的双目摄像头+VR显示系统的显示方式更加高效，Vive追踪器的加入也进一步优化了交互体验，具有较强的创新性，是一套较为人性化的系统。

\chapter{系统简介}
	该项目可分为两个子系统：图像显示系统及机器人控制系统。
	\section{图像显示系统}
	本项目旨在提供一个具有较强立体感的实时全景图像，以使远程操控者获得身临其境的体验。而由于实时全景图像拼接技术不成熟且耗费计算资源，此外三维场景的重构需要很高的算力且不能保证实时性，因此我们选择了较为便捷、高效的方法，即用ZED双目摄像头来采集实时场景信息。两个目采集到的图像对应到VR眼镜的两个显示屏中，而搭载ZED的多自由度支架可随操纵者头部的转动而实时旋转，以保证双目摄像头的朝向和操作者双眼朝向一致，从而使操作者可以实时地看到各方位的立体场景，同时也减小了延迟。
	\section{机器人控制系统}
	采用Vive追踪器进行远程控制，使得操作者能够利用自身的动作控制机器人的运动。这种方式高效、便捷、十分符合人类的行为习惯，因而会带来良好的操作体验。具体来讲，就是将多个Vive追踪器绑在操作者的各身体部位上，利用虚拟现实头盔和追踪器上的红外定位模块实时采集其各部位的位置和角度，而机器人终端则利用这些坐标和角度而精确重现操纵者的动作，进行各种任务。



\chapter{现有系统问题}


\section{现有的三维图像采集系统}

\section{现有的机器人遥操作系统}



\chapter{技术细节}

\section{实时图像采集与显示系统}
项目用于和Vive头盔进行互动的是一个ZED双目摄像头。ZED双目摄像头搭载在由两个数字舵机组成的双自由度平台上，用于与用户交互。

整个系统放置在4轮全向轮底盘上面， ZED双目摄像头采集到的图像，通过USB3.0发送给Nvidia Jetson TX1，TX1上运行Ubuntu，图像在TX1上处理后，使用UV4L服务（User space Video4Linux）发送到局域网。同时，Vive VR头盔的姿态数据通过HTC串流盒发送到计算机中进行处理，处理后通过蓝牙串口发送到全向轮车上面的Arduino Mega 2560，控制双自由度数字舵机做出与Vive VR头盔同步的转动，使安装在双自由度数字舵机平台上的ZED双目摄像头的指向与Vive头盔实时相同。

演示视频参见附件XXX

\section{机械臂控制系统}

\section{NAO机器人控制系统}
项目中为了控制机器人的手臂，采用逆运动学的方式，通过设定机器人的通过设定机器人的端点来计算关节必要的旋转值以计划动作。由于NAO机器人手臂（不包括手指部分）的自由度超过3个，因此在仅要设置手指尖端的目标坐标点的情况下，会出现手臂姿态不唯一的情况。通过筛选使得手臂各个关节与端点的坐标实现一一对应。
对于机器人的姿态设定、端点设定涉及到机器人的控制理论，主要为为每个关节建立标准坐标系解读链接和位置以及决定关节转换的基本程序。从操控熬点开始到第一个关节，再以此类推直到最后一个关节。转换后得到的转换矩阵可以用来得到目标位置。

我们主要采用Denavit Hartenberg (DH)来进行运动学的计算。我们根据厂家提供的四个标准练习所得到的四个矩阵相乘可以得到变换矩阵A。每个n代表现在的关节，整理后如下所示：

为了根据目的点的坐标分离方程序，以得到各个关节的值，我们将变换矩阵"An"的逆矩阵相乘于关系方程序的左边来取得计算角度值的元素。右手包含五个关节，从上到下分别是肩膀关节(RShoulderPitch，RShoulderRoll 两个)，手肘关节(elbow RElbowRoll，RElbowYaw 两个)，和手腕关节(RWristYaw)。因此，表示从肩膀到手腕的移动的转动矩阵为

然后我们通过逐步乘以的方式得到各个关节的变换矩阵A，进而可以通过以下公式得到每个关节的转动参数。

由以上方程并结合NAO的链接关节变量数据（在NAO官网上提供），我们可以根据目的点得到每个关节点旋转的角度，从而达到基于逆运动学控制机器人的机械臂。



\chapter{项目展示}

现阶段已完成一个由全向轮底盘移动的机械臂，平台上搭载多自由度机械结构托举的双目摄像头，随着操作者头部的转动而同步转动，以采集实时图像信息。

我们可以实现读取追踪器和VR头盔绝对位置并通过串口发送。可以看到图片中输出了左手，右手和头盔的绝对坐标。我们改写了机械臂底层及接口，解决了串口控制卡顿的情况。现在已实现用遥控器-接收机控制系统，远程完成叠纸杯实验。另外，我们在机械臂末端加上了吸盘执行机构，使用气泵和电磁阀组建了一个吸附装置。四轮全向轮底盘也搭建完成。

经测试，我们这套系统远程控制实时性很好，视频传输感受不到延迟，在VR眼睛中有很强的立体感。此外，控制较传统方式更简便，追踪器较外骨骼造价低。

在之后的一段时间内，我们将调用追踪器位置信息，发送给下位机，实现追踪器控制机械臂的功能。

另外我们刚刚借到了Now机器人，准备在操作者手脚上放置四个追踪器，以此来控制机器人的运动，如站立，行走等。


\section{}

\section{}



\chapter{未来应用}
未来此技术可以用于拆弹，救援，远程交互等领域。为了完善机器人的功能，可以加上手势识别元件实现机器人手部的动作。

此外，该系统中机器人可不断对操控者的行为进行学习。通过采集每次操作的数据，可以使用增强学习训练机器人自主地执行任务。
